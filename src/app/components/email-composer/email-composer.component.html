<div class="email-composer">
  <h2>Redactar Correo</h2>

  <!-- Campos de destinatarios, CC y CCO en fila -->
  <div class="email-fields">
    <div class="email-field">
      <h3>Destinatarios:</h3>
      <select class="contact-select" multiple (change)="toggleSelection($event, 'recipients')">
        <option *ngFor="let contact of contacts" [ngValue]="contact.correoContacto">
          {{ contact.nombreContacto }} ({{ contact.correoContacto }})
        </option>
      </select>
    </div>

    <div class="email-field">
      <h3>CC:</h3>
      <select class="contact-select" multiple (change)="toggleSelection($event, 'cc')">
        <option *ngFor="let contact of contacts" [ngValue]="contact.correoContacto">
          {{ contact.nombreContacto }} ({{ contact.correoContacto }})
        </option>
      </select>
    </div>

    <div class="email-field">
      <h3>CCO:</h3>
      <select class="contact-select" multiple (change)="toggleSelection($event, 'bcc')">
        <option *ngFor="let contact of contacts" [ngValue]="contact.correoContacto">
          {{ contact.nombreContacto }} ({{ contact.correoContacto }})
        </option>
      </select>
    </div>
  </div>
  
    <!-- Combo de Categor√≠as -->
    <div class="input-field">
      <label for="category">Categor√≠a:</label>
      <select id="category" [(ngModel)]="selectedCategory" (change)="onCategoryChange()">
        <option value="PRI">Principal</option>
        <option value="PRO">Promoci√≥n</option>
        <option value="SOC">Social</option>
        <option value="NOT">Notificaci√≥n</option>
        <option value="INP">Importante</option>
        <option value="SPA">SPAM</option>
        <option value="PAP">Papelera</option>
      </select>
    </div>

  <!-- Asunto -->
  <div class="input-field">
    <label for="subject">Asunto:</label>
    <textarea id="subject" [(ngModel)]="subject" placeholder="Agregar un asunto" (input)="onSubjectChange()"></textarea>
  </div>

  <!-- Mensaje -->
  <div class="textarea-field">
    <label for="message">Mensaje:</label>
    <textarea id="message" [(ngModel)]="message" placeholder="Agrega un mensaje" (input)="onMessageChange()"></textarea>
  </div>

  <!-- Bot√≥n de adjuntar archivos -->
  <div class="attach-button-container">
    <button class="attach-button" (click)="openFileModal()" title="Adjuntar Archivos">
      <span class="clip-icon">üìé</span>
      <span class="attach-text">Adjuntar Archivos</span>
    </button>
  </div>

  <!-- Modal de selecci√≥n de archivo -->
  <div *ngIf="isModalOpen" class="modal">
    <div class="modal-content">
      <h3>Seleccionar archivo</h3>
      <select [(ngModel)]="selectedFileId">
        <option *ngFor="let file of allowedFiles" [value]="file.attachmentId">
          {{ file.attachmentName }}
        </option>
      </select>
      <input [(ngModel)]="attachmentName" placeholder="Nombre del archivo" />
      <button (click)="addAttachment()">Agregar</button>
      <button (click)="closeFileModal()">Cerrar</button>
    </div>
  </div>

  <!-- Lista de archivos adjuntos -->
  <div class="attached-files">
    <h3>Archivos adjuntos:</h3>
    <div class="attachments-list">
      <div *ngFor="let attachment of attachments; let i = index" class="attachment-item">
        <span class="attachment-name">{{ attachment.attachmentName }}</span>
        <button class="remove-attachment" (click)="removeAttachment(i)">‚ùå</button>
      </div>
    </div>
  </div>

  <button [disabled]="showWarning" (click)="sendEmail()">Enviar</button>
</div>
